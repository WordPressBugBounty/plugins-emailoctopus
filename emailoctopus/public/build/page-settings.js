!function(e,t){function o(){e(".emailoctopus-notice").remove()}function i(t,o){e(".emailoctopus-api-key.wrap").after('<div class="emailoctopus-notice notice notice-'+t+'"><p>'+o+"</p></div>")}e(document.getElementById("emailoctopus-api-key-input")).on("input",(function(){o(),e(document.getElementById("emailoctopus-api-key-input")).removeClass("emailoctopus-invalid")})),e(document.getElementById("api_key_form")).on("submit",(function(a){a.preventDefault(),o();const n=e.trim(e(document.getElementById("emailoctopus-api-key-input")).val());if(""===n)return i("error",t.apiKeyEmpty),void e(document.getElementById("emailoctopus-api-key-input")).addClass("emailoctopus-invalid");e(document.getElementById("emailoctopus-settings-save")).prop("disabled","disabled").val(t.apiCheckSaving),e.ajax(ajaxurl,{type:"POST",data:{action:"emailoctopus_update_settings",_ajax_nonce:e(document.getElementById("_eo_nonce")).val(),api_key:n}}).done((function(o){e(document.getElementById("emailoctopus-settings-save")).prop("disabled",!1).val(t.apiCheckSave),o.success?(i("success",o.message),e(".emailoctopus-api-key-status-container-connected").show(),e(".emailoctopus-api-key-status-container-not-connected").hide(),e(document.getElementById("emailoctopus-api-key-input")).val(o.api_key_masked),"emailoctopus"===wpAjax.unserialize(window.location.href).page&&(window.location.href=window.location.href)):(e(".emailoctopus-api-key-status-container-connected").hide(),e(".emailoctopus-api-key-status-container-not-connected").show(),e(document.getElementById("emailoctopus-api-key-input")).addClass("emailoctopus-invalid"),i("error",o.message))}))}))}(window.jQuery,window.emailOctopusL10n);